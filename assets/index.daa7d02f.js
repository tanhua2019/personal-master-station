import{_ as I,g as l,c as L,h as N,p as T,o as i,a as m,M as W,N as F,B as v,e as j,C as A}from"./index.ea741418.js";const y=n=>{const t=_(n);return Object.keys(n).find(r=>n[r]===t)},_=n=>{const t=Object.values(n);return Math.min(...t)},O=n=>{const t=Object.values(n);return Math.max(...t)};const R={__name:"index",props:{data:{type:Array,required:!0},nodeKey:{type:String},column:{default:2,type:Number},columnSpacing:{default:20,type:Number},rowSpacing:{default:20,type:Number},picturePreReading:{type:Boolean,default:!0}},setup(n){const t=n,r=l(0),o=l({}),H=()=>{o.value={};for(let e=0;e<t.column;e++)o.value[e]=0},u=l(null),d=l(0),p=l(0),x=()=>{const{paddingLeft:e,paddingRight:a}=getComputedStyle(u.value,null);p.value=parseFloat(e),d.value=u.value.offsetWidth-parseFloat(e)-parseFloat(a)},c=l(0),C=L(()=>(t.column-1)*t.columnSpacing),S=()=>{x(),c.value=(d.value-C.value)/t.column};N(()=>{S()});let g=[];const b=()=>{[...document.getElementsByClassName("m-waterfall-item")].forEach(a=>{console.log(a.offsetHeight,"111"),g.push(a.offsetHeight)}),w()},w=()=>{t.data.forEach((e,a)=>{e._style||(e._style={},e._style.left=M(),e._style.top=k(),E(a))}),r.value=O(o.value)},M=()=>y(o.value)*(c.value+t.columnSpacing)+p.value,k=()=>_(o.value),E=e=>{const a=y(o.value);o.value[a]+=g[e]+t.rowSpacing};return T(()=>t.data,e=>{e.every(s=>!s._style)&&H(),A(()=>{b()})},{immediate:!0,deep:!0}),(e,a)=>(i(),m("div",{class:"container",ref_key:"containerTarget",ref:u,style:v({height:r.value+"px"})},[(i(!0),m(W,null,F(n.data,(s,B)=>{var f,h;return i(),m("div",{class:"m-waterfall-item",key:B,style:v({left:((f=s._style)==null?void 0:f.left)+"px",top:((h=s._style)==null?void 0:h.top)+"px"})},[j(e.$slots,"default",{item:s,width:c.value},void 0,!0)],4)}),128))],4))}};var z=I(R,[["__scopeId","data-v-208fcadc"]]);export{z as default};
